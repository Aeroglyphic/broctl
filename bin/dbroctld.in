#!/usr/bin/env python

BroBase = "@PREFIX@"

import os
import sys

BroBase = "@PREFIX@"

# Allow user to override default broctl install directory
tmpbrobase = os.getenv("BROCTL_INSTALL_PREFIX")
if tmpbrobase and os.path.isdir(tmpbrobase):
    BroBase = tmpbrobase

sys.path = [os.path.join(BroBase, "lib/broctl")] + sys.path

from BroControl import dbroctld


arg = None
broctlprintdoc = False
if len(sys.argv) == 3:
    # Hidden command to print the documentation.
    if sys.argv[1] == "--print-doc":
        broctlprintdoc = True
        sys.path = [BroBase] + sys.path
    # Adds a suffix to all paths that require to be distinct in between
    # different dbroctld instances
    elif sys.argv[1] == "--suffix":
        arg = sys.argv[2]

sys.path = [os.path.join(BroBase, "lib/broctl")] + sys.path

if __name__ == "__main__":
    dbroctld.main(BroBase, arg)
